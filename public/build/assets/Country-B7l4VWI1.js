import{u as S,r as o,j as e,H as k}from"./app-DJvBc1fd.js";import{T as _,I as L}from"./TextInput-BrVaYbqk.js";import{I as A}from"./InputLabel-C34Ofn75.js";import{P as E}from"./PrimaryButton-8Ypz53Vl.js";import{G as I}from"./GuestLayout-UvY1-pt6.js";import{E as q}from"./earth-BAx6tAoK.js";import{c as h}from"./createLucideIcon-C5DVBl7q.js";import{S as T}from"./search-Cs1L7SjW.js";const z=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],D=h("check",z);const F=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],B=h("chevron-down",F);function G(s){return s?typeof s=="string"?s:s.name||s.country||s.country_name||s.commonName||s.common_name||s.officialName||s.official_name||null:null}function K({country:s}){const{data:p,setData:u,post:g,processing:j,errors:b}=S({country:s||""}),[i,m]=o.useState([]),[a,f]=o.useState(s||""),[N,n]=o.useState(!1),[w,d]=o.useState(!1);o.useEffect(()=>{let t=!1;async function l(){d(!0);try{const r=await(await fetch(route("onboarding.countries"))).json();if(t)return;const x=Array.isArray(r)?r:r?.data;Array.isArray(x)?m(x):m([])}finally{t||d(!1)}}return l(),()=>{t=!0}},[]);const y=o.useMemo(()=>{const t=(a||"").trim().toLowerCase(),l=i.map(r=>G(r)).filter(Boolean),c=Array.from(new Set(l));return t?c.filter(r=>r.toLowerCase().includes(t)).slice(0,12):c.slice(0,12)},[i,a]),v=t=>{t.preventDefault(),g(route("onboarding.country.store"))},C=t=>{f(t),u("country",t),n(!1)};return e.jsxs(I,{children:[e.jsx(k,{title:"Choose Country"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-gray-900",children:"Choose your country"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"This helps us personalize your membership details."})]}),e.jsxs("form",{onSubmit:v,children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"country",value:"Country"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(q,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),e.jsx(_,{id:"country",name:"country",value:a,placeholder:w?"Loading countries...":"Start typing to search",className:"block w-full pl-10 pr-10",onChange:t=>{f(t.target.value),u("country",t.target.value),n(!0)},onFocus:()=>n(!0),autoComplete:"off",required:!0}),e.jsx("button",{type:"button",onClick:()=>n(t=>!t),className:"absolute right-2 top-1/2 -translate-y-1/2 rounded-md p-2 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:ring-offset-2","aria-label":"Toggle country list",children:e.jsx(B,{className:"h-4 w-4"})}),N&&y.length>0&&e.jsxs("div",{className:"absolute z-10 mt-2 w-full overflow-hidden rounded-xl border border-gray-200 bg-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 border-b border-gray-100 px-3 py-2 text-xs text-gray-500",children:[e.jsx(T,{className:"h-3.5 w-3.5"}),"Type to filter"]}),e.jsx("div",{className:"max-h-64 overflow-auto p-1",children:y.map(t=>e.jsxs("button",{type:"button",onClick:()=>C(t),className:"flex w-full items-center justify-between rounded-lg px-3 py-2 text-left text-sm text-gray-700 hover:bg-green-50 focus:outline-none focus:bg-green-50",children:[e.jsx("span",{className:"truncate",children:t}),p.country===t&&e.jsx(D,{className:"h-4 w-4 text-green-700"})]},t))})]})]}),e.jsx(L,{message:b.country,className:"mt-2"})]}),e.jsx("div",{className:"mt-6",children:e.jsx(E,{className:"w-full justify-center",disabled:j,children:"Continue"})})]})]})}export{K as default};
