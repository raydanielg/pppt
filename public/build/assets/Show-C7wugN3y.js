import{b as u,j as e,L as y,u as T,a as U,H as F,r as H}from"./app-WodD9T31.js";import{A as b}from"./AuthenticatedLayout-DfCVmH_P.js";import{M as E}from"./message-square-CqAB2nUP.js";import{C as M}from"./circle-check-Wl4VTq28.js";import{c as x}from"./createLucideIcon-DvAImH0J.js";import{A as L,T as i}from"./thumbs-up-ldUKJIdN.js";import{H as D}from"./house-CGDYpQTW.js";import{C as f}from"./chevron-right-DzYLwrgj.js";import{U as P}from"./user-DvMB5dXR.js";import{C as q}from"./clock-DNXkJ9Cm.js";import{S as p}from"./share-2-B-jK63T5.js";import{P as z}from"./plus-CzztBUp5.js";import{S as I}from"./send-DGuwmrB5.js";import"./users-CiV2fFqH.js";import"./image-DCDJmtNr.js";import"./search-CxFu_3tP.js";import"./star-C9-sC3Ed.js";const Y=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Z=x("ellipsis",Y);const B=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],G=x("hash",B);const J=[["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}],["path",{d:"M17 14V2",key:"8ymqnk"}]],j=x("thumbs-down",J);function he({topic:a=null,posts:o=[]}){if(u.useEffect(()=>{console.log("Forum Show Rendered. Topic:",a),console.log("Posts:",o)},[a,o]),!a||typeof a!="object")return e.jsx(b,{header:e.jsx("div",{className:"hidden",children:"Forum Thread"}),children:e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 dark:bg-gray-950",children:e.jsxs("div",{className:"text-center",children:[e.jsx(E,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 font-bold",children:"Topic not found or loading..."}),e.jsx(y,{href:route("forum"),className:"mt-4 inline-block text-emerald-600 font-bold hover:underline",children:"Return to Forum"})]})})});const{auth:K}=T().props,{data:l,setData:k,post:N,processing:v,reset:w,errors:O}=U({content:""}),[V,_]=u.useState(null),C=r=>{r.preventDefault(),!(!l.content||!l.content.trim())&&N(route("forum.post.store",a.id),{preserveScroll:!0,onSuccess:()=>{w("content"),_(null)}})},n=(r,s,c)=>{s&&H.post(route("forum.react",{type:r,id:s,reactionType:c}),{},{preserveScroll:!0})},S=[{name:"JamiiCheck",icon:M},{name:"FichuaUovu",icon:G},{name:"Stories of Change",icon:L}],R=[{name:"Tanzania",flag:"ðŸ‡¹ðŸ‡¿"},{name:"Uganda",flag:"ðŸ‡ºðŸ‡¬"},{name:"Kenya",flag:"ðŸ‡°ðŸ‡ª"},{name:"Rwanda",flag:"ðŸ‡·ðŸ‡¼"},{name:"DRC",flag:"ðŸ‡¨ðŸ‡©"},{name:"Zambia",flag:"ðŸ‡¿ðŸ‡²"}],$=(r,s,c)=>{const d=Number(r)||0;if(d===0)return"Be the first to react";let t=Array.isArray(s)?[...s]:[];if(c==="like"&&!t.includes("You")&&(t=["You",...t.slice(0,2)]),t.length===0)return`${d} reactions`;const g=d>t.length?d-t.length:0,h=t.join(", ");return g>0?`${h} and ${g} others`:h},A=r=>encodeURIComponent(r).replace(/[!'()*]/g,s=>"%"+s.charCodeAt(0).toString(16)),m=r=>{if(r?.avatar_url)return r.avatar_url;const s=r?.name||"User";return`https://ui-avatars.com/api/?name=${A(s)}&background=065f46&color=ffffff`};return e.jsxs(b,{header:e.jsx("div",{className:"hidden",children:"Forum Thread"}),children:[e.jsx(F,{title:a.title||"Forum"}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 min-h-screen bg-gray-50 text-gray-900 -mx-4 -my-6 sm:-mx-6 lg:-mx-8 dark:bg-gray-950 dark:text-gray-100",children:[e.jsx("aside",{className:"w-full lg:w-56 flex-shrink-0 bg-white p-5 border-r border-gray-200 hidden lg:block dark:bg-gray-900 dark:border-gray-800",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-[10px] font-black uppercase tracking-widest text-gray-400 mb-3 dark:text-gray-500",children:"Our Community"}),e.jsx("ul",{className:"space-y-2",children:S.map(r=>e.jsx("li",{children:e.jsxs("button",{className:"flex items-center gap-2.5 text-xs font-bold text-gray-600 hover:text-emerald-600 transition-colors dark:text-gray-300 dark:hover:text-emerald-400",children:[r.icon&&e.jsx(r.icon,{className:"h-3.5 w-3.5"}),r.name]})},r.name))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-[10px] font-black uppercase tracking-widest text-gray-400 mb-3 dark:text-gray-500",children:"Regions"}),e.jsx("ul",{className:"space-y-2",children:R.map(r=>e.jsx("li",{children:e.jsxs("button",{className:"flex items-center gap-2.5 text-xs font-bold text-gray-600 hover:text-emerald-600 transition-colors w-full dark:text-gray-300 dark:hover:text-emerald-400",children:[e.jsx("span",{className:"text-base",children:r.flag}),r.name]})},r.name))})]})]})}),e.jsxs("main",{className:"flex-1 p-4 lg:p-6 space-y-4 overflow-y-auto max-w-4xl",children:[e.jsxs("nav",{className:"flex items-center gap-1.5 text-[10px] font-bold uppercase tracking-wider text-gray-400 mb-2 dark:text-gray-500",children:[e.jsxs(y,{href:route("forum"),className:"hover:text-emerald-600 flex items-center gap-1",children:[e.jsx(D,{className:"h-2.5 w-2.5"})," Forums"]}),e.jsx(f,{className:"h-2.5 w-2.5"}),e.jsx("span",{className:"hover:text-emerald-600 cursor-pointer",children:a.category||"General"}),e.jsx(f,{className:"h-2.5 w-2.5"}),e.jsx("span",{className:"text-gray-300 truncate max-w-[200px]",children:a.title})]}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden shadow-sm dark:bg-gray-900 dark:border-gray-800",children:e.jsxs("div",{className:"bg-gradient-to-r from-emerald-50 via-transparent to-transparent p-5 dark:from-emerald-950/10",children:[e.jsx("h1",{className:"text-lg lg:text-xl font-black text-gray-900 leading-snug mb-2 dark:text-white",children:a.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-[10px] font-bold text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1 hover:text-emerald-600 transition-colors cursor-pointer",children:[e.jsx(P,{className:"h-3 w-3"})," ",a.user?.name||"Anonymous"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(q,{className:"h-3 w-3"})," ",a.created_at]}),e.jsx("div",{className:"flex gap-1.5",children:["health","community"].map(r=>e.jsxs("span",{className:"bg-gray-100 px-1.5 py-0.5 rounded text-[9px] uppercase font-black tracking-tight text-gray-500 dark:bg-gray-800 dark:text-gray-400",children:["#",r]},r))})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"bg-white border border-gray-200 rounded-xl overflow-hidden shadow-sm dark:bg-gray-900 dark:border-gray-800",children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsxs("div",{className:"md:w-40 bg-gray-50/50 p-4 border-b md:border-b-0 md:border-r border-gray-100 text-center dark:bg-gray-800/20 dark:border-gray-800",children:[e.jsx("div",{className:"h-14 w-14 mx-auto overflow-hidden rounded-xl ring-2 ring-emerald-500/10 shadow-sm mb-2",children:e.jsx("img",{src:m(a.user),alt:a.user?.name||"User",className:"h-full w-full object-cover"})}),e.jsx("h4",{className:"font-black text-gray-900 text-xs truncate dark:text-white",children:a.user?.name||"Anonymous"}),e.jsx("p",{className:"text-[9px] font-black text-emerald-600 uppercase tracking-tighter mt-0.5",children:"Expert Member"}),e.jsxs("div",{className:"mt-3 space-y-0.5 text-[9px] font-bold text-gray-400 uppercase",children:[e.jsx("div",{className:"flex items-center justify-between",children:"joined 2024"}),e.jsx("div",{className:"flex items-center justify-between",children:"1.2k posts"})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"px-4 py-2 bg-gray-50/30 border-b border-gray-100 flex justify-between items-center text-[9px] font-black text-gray-400 uppercase dark:bg-gray-800/10 dark:border-gray-800",children:[e.jsx("span",{children:a.created_at}),e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-2.5 w-2.5 hover:text-emerald-600 cursor-pointer transition-colors"}),"#1"]})]}),e.jsx("div",{className:"p-4 text-gray-700 leading-relaxed whitespace-pre-wrap flex-1 text-sm dark:text-gray-200",children:a.content}),e.jsxs("div",{className:"px-4 py-2.5 bg-gray-50/50 border-t border-gray-100 flex items-center gap-3 dark:bg-gray-800/20 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-full bg-emerald-50 border border-emerald-100 text-emerald-600 text-[10px] font-black dark:bg-emerald-900/10 dark:border-emerald-500/20 dark:text-emerald-400",children:[e.jsx(i,{className:`h-3 w-3 ${a.user_reaction==="like"?"fill-emerald-600":""}`}),e.jsx("span",{children:$(a.likes_count,a.recent_likes,a.user_reaction)})]}),e.jsxs("div",{className:"flex items-center gap-1.5 ml-auto",children:[e.jsx("button",{onClick:()=>n("topic",a.id,"like"),className:`p-1.5 rounded-lg hover:bg-emerald-50 transition-colors ${a.user_reaction==="like"?"text-emerald-600":"text-gray-400"}`,children:e.jsx(i,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>n("topic",a.id,"dislike"),className:`p-1.5 rounded-lg hover:bg-red-50 transition-colors ${a.user_reaction==="dislike"?"text-red-600":"text-gray-400"}`,children:e.jsx(j,{className:"h-4 w-4"})})]})]})]})]})}),(o||[]).map((r,s)=>e.jsx("div",{className:"bg-white border border-gray-200 rounded-xl overflow-hidden shadow-sm dark:bg-gray-900 dark:border-gray-800",children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsxs("div",{className:"md:w-40 bg-gray-50/50 p-4 border-b md:border-b-0 md:border-r border-gray-100 text-center dark:bg-gray-800/20 dark:border-gray-800",children:[e.jsx("div",{className:"h-12 w-12 mx-auto overflow-hidden rounded-lg ring-2 ring-gray-100 shadow-sm mb-2 dark:ring-gray-800",children:e.jsx("img",{src:m(r.user),alt:r.user?.name||"User",className:"h-full w-full object-cover"})}),e.jsx("h4",{className:"font-bold text-gray-900 text-[11px] truncate dark:text-white",children:r.user?.name||"Anonymous"}),e.jsx("p",{className:"text-[8px] font-black text-gray-400 uppercase tracking-widest mt-0.5",children:"Expert Member"})]}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"px-4 py-2 bg-gray-50/30 border-b border-gray-100 flex justify-between items-center text-[9px] font-black text-gray-400 uppercase dark:bg-gray-800/10 dark:border-gray-800",children:[e.jsx("span",{children:r.created_at}),e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-2.5 w-2.5 hover:text-emerald-600 cursor-pointer transition-colors"}),"#",s+2]})]}),e.jsx("div",{className:"p-4 text-gray-600 text-sm leading-relaxed dark:text-gray-300",children:r.content}),e.jsxs("div",{className:"px-4 py-2 bg-gray-50/50 border-t border-gray-100 flex items-center gap-3 justify-end dark:bg-gray-800/20 dark:border-gray-800",children:[e.jsxs("button",{onClick:()=>n("post",r.id,"like"),className:`flex items-center gap-1 text-[9px] font-black transition-colors uppercase py-1 px-2 rounded-lg hover:bg-emerald-50 ${r.user_reaction==="like"?"text-emerald-600":"text-gray-400"}`,children:[e.jsx(i,{className:`h-3.5 w-3.5 ${r.user_reaction==="like"?"fill-emerald-600":""}`}),e.jsx("span",{children:r.likes_count||0})]}),e.jsxs("button",{onClick:()=>n("post",r.id,"dislike"),className:`flex items-center gap-1 text-[9px] font-black transition-colors uppercase py-1 px-2 rounded-lg hover:bg-red-50 ${r.user_reaction==="dislike"?"text-red-600":"text-gray-400"}`,children:[e.jsx(j,{className:`h-3.5 w-3.5 ${r.user_reaction==="dislike"?"fill-red-600":""}`}),e.jsx("span",{children:r.dislikes_count||0})]})]})]})]})},r.id))]}),e.jsx("div",{className:"sticky bottom-4 mt-6",children:e.jsxs("form",{onSubmit:C,className:"bg-white rounded-xl border-2 border-emerald-500/10 shadow-lg p-3 backdrop-blur-xl dark:bg-gray-900/90 dark:border-emerald-500/20",children:[e.jsx("textarea",{value:l.content,onChange:r=>k("content",r.target.value),placeholder:"Write your response...",className:"block w-full rounded-lg border-none bg-gray-50 text-gray-900 py-3 px-4 text-sm font-medium shadow-inner focus:ring-1 focus:ring-emerald-500 resize-none h-20 dark:bg-gray-950/50 dark:text-gray-100",required:!0}),e.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[e.jsxs("div",{className:"flex gap-3 text-gray-400",children:[e.jsx(z,{className:"h-4 w-4 cursor-pointer hover:text-emerald-600"}),e.jsx(Z,{className:"h-4 w-4 cursor-pointer hover:text-emerald-600"})]}),e.jsxs("button",{disabled:v||!l.content||!l.content.trim(),className:"inline-flex items-center gap-1.5 rounded-lg bg-emerald-600 px-5 py-2 text-xs font-black text-white shadow-md hover:bg-emerald-500 transition-all active:scale-95 disabled:opacity-50",children:[e.jsx(I,{className:"h-3.5 w-3.5"}),"Reply"]})]})]})})]})]})]})}export{he as default};
