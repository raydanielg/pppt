import{u as x,b as m,a as g,j as e,H as p,r as i}from"./app-WodD9T31.js";import{A as u}from"./AdminLayout-DjZzVwVK.js";import{C as b}from"./cloud-upload-TzB0Y6hS.js";import{T as y}from"./trash-2-y83D0aWp.js";import"./users-CiV2fFqH.js";import"./createLucideIcon-DvAImH0J.js";import"./image-DCDJmtNr.js";import"./chevron-down-Bzvsf0nN.js";function C({categories:s=[],images:a}){const l=x().props.flash,d=m.useMemo(()=>a?.data||[],[a]),t=g({gallery_category_id:s?.[0]?.id||"",title:"",description:"",image:null}),o=r=>{r.preventDefault(),t.post(route("admin.gallery-images.store"),{forceFormData:!0,preserveScroll:!0,onSuccess:()=>t.reset("title","description","image")})},c=r=>{confirm("Delete this image?")&&i.delete(route("admin.gallery-images.destroy",r),{preserveScroll:!0})};return e.jsxs(u,{title:"Gallery Images",children:[e.jsx(p,{title:"Admin - Gallery Images"}),l?.success?e.jsx("div",{className:"mb-4 rounded-2xl border border-emerald-200 bg-emerald-50 px-4 py-3 text-sm font-black text-emerald-800",children:l.success}):null,e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"rounded-2xl border border-gray-200 bg-white p-5 lg:col-span-1",children:[e.jsx("div",{className:"text-sm font-black text-gray-900",children:"Upload Image"}),e.jsx("div",{className:"mt-1 text-xs text-gray-500",children:"Add a new image to the gallery."}),e.jsxs("form",{onSubmit:o,className:"mt-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-black uppercase tracking-widest text-gray-500",children:"Category"}),e.jsx("select",{value:t.data.gallery_category_id,onChange:r=>t.setData("gallery_category_id",r.target.value),className:"mt-2 w-full rounded-xl border border-gray-200 bg-gray-50 px-3 py-2.5 text-sm focus:border-emerald-500 focus:ring-emerald-500",children:s.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))}),t.errors.gallery_category_id?e.jsx("div",{className:"mt-1 text-xs font-bold text-rose-600",children:t.errors.gallery_category_id}):null]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-black uppercase tracking-widest text-gray-500",children:"Title (optional)"}),e.jsx("input",{value:t.data.title,onChange:r=>t.setData("title",r.target.value),className:"mt-2 w-full rounded-xl border border-gray-200 bg-gray-50 px-3 py-2.5 text-sm focus:border-emerald-500 focus:ring-emerald-500",placeholder:"Image title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-black uppercase tracking-widest text-gray-500",children:"Description (optional)"}),e.jsx("textarea",{value:t.data.description,onChange:r=>t.setData("description",r.target.value),className:"mt-2 h-24 w-full rounded-xl border border-gray-200 bg-gray-50 px-3 py-2.5 text-sm focus:border-emerald-500 focus:ring-emerald-500",placeholder:"Short description"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-black uppercase tracking-widest text-gray-500",children:"Image File"}),e.jsxs("div",{className:"mt-2 rounded-2xl border border-dashed border-gray-300 bg-gray-50 p-4",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:r=>t.setData("image",r.target.files?.[0]||null),className:"block w-full text-sm"}),t.errors.image?e.jsx("div",{className:"mt-1 text-xs font-bold text-rose-600",children:t.errors.image}):null]})]}),e.jsxs("button",{type:"submit",disabled:t.processing,className:"inline-flex w-full items-center justify-center gap-2 rounded-xl bg-emerald-600 px-4 py-2.5 text-xs font-black text-white hover:bg-emerald-700 disabled:opacity-60",children:[e.jsx(b,{className:"h-4 w-4"}),"Upload"]}),t.progress?e.jsxs("div",{className:"text-xs font-black text-gray-600",children:["Uploading... ",t.progress.percentage,"%"]}):null]})]}),e.jsxs("div",{className:"rounded-2xl border border-gray-200 bg-white p-5 lg:col-span-2",children:[e.jsx("div",{className:"text-sm font-black text-gray-900",children:"All Images"}),e.jsx("div",{className:"mt-1 text-xs text-gray-500",children:"Latest uploads."}),e.jsx("div",{className:"mt-4 grid gap-4 sm:grid-cols-2",children:d.length?d.map(r=>e.jsxs("div",{className:"rounded-2xl border border-gray-200 overflow-hidden bg-white",children:[e.jsx("div",{className:"aspect-[4/3] bg-gray-50",children:e.jsx("img",{src:r.image_url,alt:r.title||"Gallery image",className:"h-full w-full object-cover"})}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"text-xs font-black text-gray-900 truncate",children:r.title||"Untitled"}),e.jsx("div",{className:"mt-1 text-[10px] font-black uppercase tracking-widest text-gray-500",children:r.category?.name||"â€”"}),r.description?e.jsx("div",{className:"mt-2 text-xs text-gray-500 line-clamp-2",children:r.description}):null,e.jsx("div",{className:"mt-3 flex justify-end",children:e.jsxs("button",{type:"button",onClick:()=>c(r.id),className:"inline-flex items-center gap-2 rounded-xl border border-rose-200 bg-rose-50 px-3 py-2 text-xs font-black text-rose-700 hover:bg-rose-100",children:[e.jsx(y,{className:"h-4 w-4"}),"Delete"]})})]})]},r.id)):e.jsxs("div",{className:"sm:col-span-2 rounded-2xl border border-gray-200 bg-gray-50 p-10 text-center",children:[e.jsx("div",{className:"text-sm font-black text-gray-900",children:"No images yet"}),e.jsx("div",{className:"mt-1 text-xs text-gray-500",children:"Upload your first image."})]})}),a?.links?e.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:a.links.map((r,n)=>e.jsx("button",{type:"button",disabled:!r.url,onClick:()=>r.url&&i.visit(r.url,{preserveScroll:!0,preserveState:!0}),className:"rounded-xl px-3 py-2 text-xs font-black border "+(r.active?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-gray-200 bg-white text-gray-700 hover:bg-gray-50")+(r.url?"":" opacity-40 cursor-not-allowed"),dangerouslySetInnerHTML:{__html:r.label}},n))}):null]})]})]})}export{C as default};
