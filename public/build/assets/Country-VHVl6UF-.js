import{a as C,b as o,j as e,H as S}from"./app-WodD9T31.js";import{T as A,I as E}from"./TextInput-v2zqSfcU.js";import{I as L}from"./InputLabel-C5f6SDqH.js";import{P as k}from"./PrimaryButton-Ca6AWZ6U.js";import{G as I}from"./GuestLayout-DQcbdKw_.js";import{E as T}from"./earth-CPlDBrbD.js";import{C as q}from"./chevron-down-Bzvsf0nN.js";import{S as _}from"./search-CxFu_3tP.js";import{C as z}from"./check-B9B0j3Wm.js";import"./createLucideIcon-DvAImH0J.js";function D(s){return s?typeof s=="string"?s:s.name||s.country||s.country_name||s.commonName||s.common_name||s.officialName||s.official_name||null:null}function K({country:s}){const{data:p,setData:c,post:h,processing:g,errors:j}=C({country:s||""}),[i,m]=o.useState([]),[n,f]=o.useState(s||""),[b,a]=o.useState(!1),[N,d]=o.useState(!1);o.useEffect(()=>{let t=!1;async function l(){d(!0);try{const r=await(await fetch(route("onboarding.countries"))).json();if(t)return;const x=Array.isArray(r)?r:r?.data;Array.isArray(x)?m(x):m([])}finally{t||d(!1)}}return l(),()=>{t=!0}},[]);const y=o.useMemo(()=>{const t=(n||"").trim().toLowerCase(),l=i.map(r=>D(r)).filter(Boolean),u=Array.from(new Set(l));return t?u.filter(r=>r.toLowerCase().includes(t)).slice(0,12):u.slice(0,12)},[i,n]),w=t=>{t.preventDefault(),h(route("onboarding.country.store"))},v=t=>{f(t),c("country",t),a(!1)};return e.jsxs(I,{children:[e.jsx(S,{title:"Choose Country"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-gray-900",children:"Choose your country"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"This helps us personalize your membership details."})]}),e.jsxs("form",{onSubmit:w,children:[e.jsxs("div",{children:[e.jsx(L,{htmlFor:"country",value:"Country"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(T,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),e.jsx(A,{id:"country",name:"country",value:n,placeholder:N?"Loading countries...":"Start typing to search",className:"block w-full pl-10 pr-10",onChange:t=>{f(t.target.value),c("country",t.target.value),a(!0)},onFocus:()=>a(!0),autoComplete:"off",required:!0}),e.jsx("button",{type:"button",onClick:()=>a(t=>!t),className:"absolute right-2 top-1/2 -translate-y-1/2 rounded-md p-2 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:ring-offset-2","aria-label":"Toggle country list",children:e.jsx(q,{className:"h-4 w-4"})}),b&&y.length>0&&e.jsxs("div",{className:"absolute z-10 mt-2 w-full overflow-hidden rounded-xl border border-gray-200 bg-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 border-b border-gray-100 px-3 py-2 text-xs text-gray-500",children:[e.jsx(_,{className:"h-3.5 w-3.5"}),"Type to filter"]}),e.jsx("div",{className:"max-h-64 overflow-auto p-1",children:y.map(t=>e.jsxs("button",{type:"button",onClick:()=>v(t),className:"flex w-full items-center justify-between rounded-lg px-3 py-2 text-left text-sm text-gray-700 hover:bg-green-50 focus:outline-none focus:bg-green-50",children:[e.jsx("span",{className:"truncate",children:t}),p.country===t&&e.jsx(z,{className:"h-4 w-4 text-green-700"})]},t))})]})]}),e.jsx(E,{message:j.country,className:"mt-2"})]}),e.jsx("div",{className:"mt-6",children:e.jsx(k,{className:"w-full justify-center",disabled:g,children:"Continue"})})]})]})}export{K as default};
